## RQ1

### FactHalluQA Dataset Overview

- **Purpose**: FactHalluQA is designed to assess the hallucination in the Large Language Model (LLM) while mitigating
  the potential influence of benchmark leakage on the assessment process.
- **Composition**: The dataset consists of more than eight hundred questions in English, divided on the basis of
  disciplines, covering questions on physics, chemistry, biology, geography, history, literature, and so on.
- **Path**: The dataset is stored in this repository in the ```./RQ1/FactHalluQA``` path.

### **Data Examples**

We show some data examples of HalluQA here.
![](img/examples.png)

---

## RQ2

We present DrHall, a method for the detection of factual errors in black-box large language models inspired by
metamorphic testing in software testing.

### Requirements

* PyQt6~=6.5.2
* PyQt6-sip~=13.5.2
* loguru~=0.7.0
* openpyxl~=3.1.2
* EdgeGPT~=0.13.2
* Wikipedia-API~=0.6.0
* pandas~=2.0.3
* openai~=0.28.0
* translatepy~=2.3
* pydantic~=2.0.3
* pydantic_core~=2.3.0

### Folder Structure

* `data`: This folder contains the data to be processed.
  * `data/test_example`: This folder contains more example data for testing in the thesis.
* `entity`: This folder contains the entity files for HTTP response contents from Bard, ChatGPT, NewBing and so on.
* `keys`: This folder contains the API keys for Bard, ChatGPT, NewBing and so on.
* `log`: This folder contains the log files generated during the execution.
* `tasks`: This folder contains the tasks that need to be completed. Files in this folder are the core algorithms
  concerning the thesis target.
* `ui`: This folder contains the UI files used by PyQt6, straightforwardly verifying the correctness of the answers
  generated by AI.
* `util`: This folder contains the utility files used by the program, most of the files with which are used for
  simplifying the code.
* `config.py`: This file contains the configuration parameters used by the program.
* `main.py`: This file contains the entry that runs the program.
* `main_tr.py`: This file contains the entry that translate the questions.
* `processing.py`: This file contains entries for processing natural language output.
* `processing_code.py`: This file contains entries for processing programming language output.

### Usage

1. Create a folder named `keys` and create a file named `chatgpt_api_key` within it. Enter a valid ChatGPT API Key in
   the format `sk-....`.
2. Rename the data file to `data.xlsx` and place it in the `data` folder.
3. **_Do not use only numbers to name each sheet in `data.xlsx`_**
4. Install the required packages by running `pip install -r requirements.txt`.
5. Run the script with `python main.py [-h] [-l LOG] [-m MODE]`.
6. Follow the prompts to enter the name or index (starting from 1) of the sheet you want to process.
7. Processing will begin.
8. Log files will be stored in the `log` folder.

## RQ3

By transforming DrHall using diverse path sampling, we obtain error correction methods with higher success rates. Our
results demonstrate the potential of using MR to mitigate LLM hallucination.
### Usage
After replacing `tasks` with `RQ3`, follow the same method.
